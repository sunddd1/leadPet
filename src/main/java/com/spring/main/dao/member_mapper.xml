<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
	"-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<!-- 누가 이 XML 을 사용할까? 누구와 연결? -->
<mapper namespace="com.spring.main.dao.MemberDAO">
	<update id="withdrawa">
		UPDATE member SET withdraw = 'Y' WHERE id=#{id}
	</update>
	
	<select id="checkPw" resultType="String">
		SELECT password FROM member WHERE id = #{param1} 
	</select>
	
	<update id="restore">
		UPDATE member SET withdraw = 'N' WHERE id=#{id}
	</update>

	<select id="getMember" resultType="member">
		SELECT
			id, name, age, gender, email, reg_date, black, withdraw, 
			change_date, nickname, point, grade
		FROM
			member
		WHERE
			id=#{param1}
	</select>

	<update id="updateChangeDate">
		UPDATE
			member
		SET
			change_date=sysdate
		WHERE
			id=#{param1}
	</update>

	<update id="update" parameterType="member">
		UPDATE
			member
		<set>
			<if test="password != null">password=#{password},</if>
			<if test="name != null">name=#{name},</if>
			<if test="age != null">age=#{age},</if>
			<if test="gender != null">gender=#{gender},</if>
			<if test="email != null">email=#{email},</if>
			<if test="nickname != null">nickname=#{nickname}</if>
		</set>
		WHERE
			id=#{id}		
	</update>

</mapper>